---
title: "制約条件の指定"
description: "出力に対する制約を明確に指定する"
category: "ai-fundamentals"
contentType: "tip"
difficulty: "beginner"
tags: ["プロンプティング基礎", "基本テクニック"]
publishedAt: "2026-02-14"
featured: false
---

# 制約条件の指定

## このテクニックとは

制約条件の指定（Constraint Specification）とは、AIへのプロンプトに出力の形式・長さ・内容・スタイルに関する明確な制約を与えることで、目的に合った出力を確実に得る手法です。「自由に答えてください」よりも「○○の形式で、○字以内で、○を含めて答えてください」という制約を明示することで、AIは期待に合致した出力を生成しやすくなります。

プロンプトエンジニアリングの基礎研究では、制約の明示がAIの出力の「予測可能性」と「一貫性」を大幅に高めることが示されています。特に医療文書の作成、構造化された報告書、電子カルテへの入力用テキストなど、決まったフォーマットへの準拠が求められる場面では、この技術は不可欠です。

制約には大きく分けて、(1)形式的制約（JSON、表形式、箇条書きなど）、(2)量的制約（○文字以内、○項目など）、(3)内容的制約（含めるべき情報・除外すべき情報）、(4)スタイル制約（対象読者の専門レベル、言語のトーン）の4種類があります。これらを組み合わせて使うことで、さらに精密な出力制御が可能になります。

## 基本的な使い方

出力の形式・長さ・内容要件を、プロンプトの冒頭または末尾に明確に記述します。複数の制約がある場合は、箇条書きで整理して記述するのが効果的です。

### パターン1: 形式と長さの制約

```text
以下の患者情報をもとに、[目的]を作成してください。

制約:
- 形式: [JSON形式 / 箇条書き / SOAP形式 / 表形式]
- 長さ: [○字以内 / ○項目以内 / ○行以内]
- 含めるべき内容: [必須項目のリスト]
- 除外すること: [含めてはいけない情報]
- 対象読者: [医師 / 看護師 / 患者本人 / 行政機関]

患者情報: [情報]
```

### パターン2: 対象読者に応じた説明の制約

```text
以下の医学的内容を、指定した条件で説明してください。

内容: [説明したい医学的事項]

制約:
- 対象: 医学知識のない一般患者（高校生程度の理解力）
- 長さ: 300字以内
- 専門用語: 使用する場合は必ずカッコ内に平易な説明を追加する
- トーン: 親しみやすく、不安を煽らない表現
- 含める情報: 病態の概要、日常生活での注意点、次回受診のタイミング
```

### パターン3: 構造化文書作成の制約

```text
以下の情報をもとに、電子カルテへの入力用テキストを作成してください。

制約:
- 形式: SOAPノート（S/O/A/Pの各セクションを明示）
- S（主訴）: 患者の言葉を活かした記述、50字以内
- O（客観的情報）: 数値は単位付きで記載
- A（評価）: ICD-10コードを付記
- P（計画）: 箇条書き、具体的な次のアクションを含む

情報: [診察内容]
```

## 医療での活用例

### シナリオ

救急外来で複数の患者の症例報告書を迅速に作成する必要がある。各報告書は指定フォーマットに従い、300文字以内で診断概要と治療方針を簡潔にまとめなければならない。

### プロンプト例

```text
以下の患者情報と症例情報を基に、指定のフォーマットに従って
診断概要と治療方針を作成してください。

制約:
- 形式: JSON形式（キーは「診断概要」「治療方針」「フォローアップ」）
- 「診断概要」: 100字以内、確定診断名とその根拠を含む
- 「治療方針」: 箇条書き3項目以内、優先順位順
- 「フォローアップ」: 次回受診時期と観察ポイントを含む50字以内
- 専門用語はそのまま使用（医師向け文書）

患者情報: [患者情報]
症例情報: [症例情報]
```

## いつ使うべきか

- 電子カルテや医療記録への入力用テキストを定型フォーマットで作成したい場合
- 患者説明文書・パンフレットなど、対象読者を明確に定めた文書を作成する場合
- 複数の症例に対して統一されたフォーマットの出力が必要な場合
- API連携などでJSON・CSV等の機械可読形式での出力が必要な場合
- 字数・時間・コストの制約がある状況での効率的な情報生成
