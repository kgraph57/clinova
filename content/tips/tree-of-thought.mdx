---
title: "Tree of Thought（思考の木）"
description: "複数の推論パスを並行して探索する"
category: "ai-fundamentals"
contentType: "tip"
difficulty: "advanced"
tags: ["上級テクニック", "高度プロンプティング"]
publishedAt: "2026-02-14"
featured: false
---

# Tree of Thought（思考の木）

## このテクニックとは

Tree of Thought（ToT）とは、問題解決において単一の推論チェーン（Chain of Thought）にとどまらず、複数の推論パスを木構造で並行して探索し、最も有望な経路を選択・深化させていく手法です。2023年にPrinceton大学とGoogle DeepMindの共同研究チームが発表した論文「Tree of Thoughts: Deliberate Problem Solving with Large Language Models」でその有効性が示されました。

Chain of Thought（CoT）が「一本道の推論」であるのに対し、ToTは「思考の木」を構築します。各節点（ノード）が一つの思考ステップを表し、そこから複数の選択肢（枝）が伸びます。評価ステップでどの枝が最も有望かを判断し、有望な枝をさらに深化させる一方、行き詰まった枝は切り捨てます（枝刈り、pruning）。これはチェスの棋士が複数の手を読み進める思考や、医師が鑑別診断を絞り込む過程と本質的に同じです。

研究では、ToTがゲームのような探索問題や数学的推論、クリエイティブライティングにおいてCoTを大幅に上回る性能を示しています。医療への応用では特に、複数の鑑別診断を並行して追跡し、新たな検査情報を得るたびに各診断仮説の確率を更新していく「並行鑑別診断プロセス」に最も自然に対応します。

## 基本的な使い方

「複数の可能性を並行して探索し、各経路を評価しながら最善の結論に至ってください」という指示が基本形です。明示的に分岐点・評価基準・最終的な統合を指定することで、より構造的なToTが実現します。

### パターン1: 基本的なToTプロンプト

```text
以下の[問題・症例]について、Tree of Thought の手法で分析してください。

問題: [症例・診断問題]

手順:
1. 【分岐】現時点で考えられる主要な仮説・可能性を3〜5つ挙げる
2. 【評価】各仮説の現時点での確率/妥当性を、支持する根拠と反対する根拠を基に評価する
3. 【選択】最も有望な仮説を2〜3つに絞り込む
4. 【深化】選択した各仮説について、「もしこれが正しければ何が観察されるはずか」を推論する
5. 【統合】実際の所見と照合し、最終的な結論に至る

行き詰まった経路があれば明示し、その理由も示してください。
```

### パターン2: 検査結果で更新するToT

```text
以下の症例で、検査結果が得られるたびに各診断仮説の確率を更新するToT分析を行ってください。

初期情報: [患者の基本情報と主訴]

ステップ1: 初期情報から主要な仮説（3〜4つ）とそれぞれの初期確率を設定する

【以下、検査結果を順に提示するので、各結果で仮説の確率を更新してください】

検査結果A: [心電図所見]
→ 各仮説の確率を更新し、新たに分岐すべき仮説があれば追加する

検査結果B: [血液検査結果]
→ 同様に更新する

最終的に最も確率の高い診断と、その根拠を示してください。
```

### パターン3: 治療選択のToT

```text
以下の患者に対する治療戦略について、Tree of Thought で複数の治療経路を探索してください。

患者情報: [患者情報]
治療目標: [達成したいアウトカム]

治療経路の探索:
1. 主要な治療アプローチを3つ並行して検討する（経路A, B, C）
2. 各経路の予想される効果・リスク・患者負担を評価する
3. 最も有望な経路を選択し、その詳細な実装計画を示す
4. 選択しなかった経路が「次善の選択肢」となる条件も示す
```

## 医療での活用例

### シナリオ

高度に複雑な症例で、多数の鑑別診断が考えられる患者が入院している。患者の既往歴や検査結果から複数の疾患が疑われており、最適な診断と治療方針を決定するために多角的な推論が求められている。

### プロンプト例

```text
以下の患者情報と症例情報を基に、Tree of Thoughtの手法を用いて
複数の診断パスを並行して探索してください。

患者情報:
- 67歳男性、喫煙歴30年（20本/日）、既往: 高血圧、COPD
- 主訴: 1週間の発熱（38.5°C）、体重減少（1ヶ月で5kg）、労作時呼吸困難の増悪
- 身体所見: 右肺野の呼吸音減弱、頸部リンパ節腫大
- 画像: 胸部X線で右肺門部の陰影と右胸水

ToT分析の手順:
1. 主要な診断仮説を4つ並行して立てる（各仮説に初期確率を設定）
2. 各仮説で「この診断なら説明できる所見」「説明できない所見」を整理する
3. 各仮説を確定・除外するために必要な追加検査を優先順位付きで提案する
4. 最も緊急性が高い・見逃せない診断はどれかを評価する
5. 現時点での最有力診断と、それが否定された場合の次の候補を提示する
```

## いつ使うべきか

- 複数の鑑別診断を並行して追跡し、段階的に絞り込む必要がある複雑な症例
- 「見逃してはいけない診断」（killer diagnosis）を必ず検討リストに維持したい場合
- 治療選択で複数のアプローチのうち最善を選ぶ際の系統的な比較
- 情報が段階的に得られる状況で、各段階での最善判断を連続的に行いたい場合
- Chain of Thoughtの単線的推論では網羅性が不十分と感じる難症例の分析
