---
title: "反事実分析"
description: "「もし〜だったら」という仮定で分析する"
category: "ai-fundamentals"
contentType: "tip"
difficulty: "advanced"
tags: ["上級テクニック", "高度プロンプティング"]
publishedAt: "2026-02-14"
featured: false
---

# 反事実分析

## このテクニックとは

反事実分析（Counterfactual Analysis）とは、「もし〜が異なっていたら、結果はどう変わっていたか」という反事実的（counterfactual）な仮定を設定して推論する手法です。哲学者デイヴィッド・ルイスの可能世界理論や、統計学者ジューデア・パールの因果推論フレームワークに理論的基盤を持ち、「実際には起きなかった代替シナリオ」を想像することで、因果関係の理解や意思決定の改善に役立てます。

医療における反事実分析は、(1)診断過程の振り返り（「もし最初から別の検査をしていたら」）、(2)治療効果の評価（「もし別の薬を選んでいたら」）、(3)予防介入の意義の定量化（「もし禁煙していたら現在の肺機能はどうだったか」）、(4)合併症の原因分析（「もし血圧管理が適切だったら」）など幅広い用途があります。

臨床における「もし〜だったら」という思考は、学習と改善の核心です。M&M（morbidity and mortality）カンファレンスでの事例分析や、有害事象報告後の根本原因分析（RCA）も反事実分析の実践です。AIに反事実分析を促すことで、個別症例の振り返りや予防医学的なシミュレーションを体系的に行えます。

## 基本的な使い方

反事実の仮定（「もし〜であったら」）を明示したうえで、その仮定のもとで何が変わるかを推論させます。実際の結果と反事実の結果を対比させることで、因果関係と学習ポイントが明確になります。

### パターン1: 診断の振り返り

```text
以下の症例について、反事実分析を実施してください。

【実際の経過】
[症例の実際の経過・診断・転帰]

【反事実の仮定】
「もし[別の検査/診断/治療]を最初から行っていたら」

分析内容:
1. 反事実のシナリオで何が変わっていたか（早期診断、転帰改善など）
2. その差異を生じさせる鍵となった意思決定ポイントはどこか
3. 実際の経過でどのような思考のバイアスや情報不足があったか
4. 今後の類似症例への学習ポイント
```

### パターン2: 治療選択の比較

```text
以下の患者に対する治療選択について、反事実的な比較分析を行ってください。

患者情報: [患者情報]
実際の治療: [実施した治療A]
比較する反事実: [代替治療B, C]

各シナリオ（A, B, C）について:
1. 予想される短期的転帰
2. 予想される長期的転帰
3. リスクとベネフィットのバランス
4. どのシナリオが最善だったか、その根拠

注意: 現時点の知識・利用可能な情報に限定して評価してください。
```

### パターン3: 予防医学の反事実シミュレーション

```text
以下の患者の現在の状態について、反事実的に予防介入の効果を推定してください。

現在の状態: [診断・合併症・検査値]
過去の経過: [生活習慣・治療歴]

反事実の仮定: 「もし10年前から[禁煙/血圧管理/体重管理]を実施していたら」

推定内容:
1. 現在の状態がどう異なっていたか（合併症の予防、臓器機能の違い）
2. その根拠となるエビデンス（介入の絶対リスク減少率など）
3. 現時点からの介入でもなお期待できる効果
```

## 医療での活用例

### シナリオ

糖尿病患者の治療計画を検討している医療チームが、患者の血糖コントロールが不良である原因を特定し、より効果的な介入策を模索している。個別のリスク要因を考慮しながら、治療方針の最適化を図る必要がある。

### プロンプト例

```text
以下の患者情報を基に、反事実分析を用いてリスク要因を特定し、
最適な治療戦略を提案してください。

患者情報: 56歳男性、2型糖尿病罹患8年
現在: HbA1c 9.8%、BMI 31.2、喫煙者（20本/日×30年）
合併症: 軽度の糖尿病腎症（eGFR 62）、高血圧

反事実シナリオの分析:
1. 「もし診断時からHbA1cを7%以下に管理していたら」現在の腎機能はどうだったか
2. 「もし5年前に禁煙していたら」心血管リスクへの影響は
3. 「もし体重を5kg減量していたら」血糖コントロールはどう変わっていたか

各反事実シナリオで:
- 現在との差異の推定（エビデンスに基づく）
- 今から同様の介入を行った場合に期待できる効果
- 最優先で取り組むべき介入の順位付けと根拠
```

## いつ使うべきか

- M&Mカンファレンスや事例振り返りでの学習ポイントの特定
- 患者への予防介入の意義を定量的に説明したい場合
- 複数の治療選択肢を事前に比較シミュレーションしたい場合
- 合併症の進行について「なぜこうなったか」を因果的に理解したい場合
- 生活習慣改善のモチベーション向上のために「変化による未来」を具体的に示したい場合
