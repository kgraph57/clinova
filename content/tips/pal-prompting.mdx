---
title: "PAL（Program-Aided Language）"
description: "プログラムコードを生成して問題を解決する"
category: "ai-fundamentals"
contentType: "tip"
difficulty: "advanced"
tags: ["上級テクニック", "高度プロンプティング"]
publishedAt: "2026-02-14"
featured: false
---

# PAL（Program-Aided Language）

## このテクニックとは

PAL（Program-Aided Language Model Prompting）は、AIに問題を自然言語で解かせるのではなく、「解くためのプログラムコードを生成させ、そのコードを実行することで答えを得る」手法です。数値計算・統計処理・データ加工のような問題では、AIが文章で推論するより、正確なコードを生成させる方が誤りが少なく、再現性も高い出力が得られます。

医療現場では電子カルテから抽出した検査値の集計、臨床研究データの統計解析、患者グループ別の比較分析など、プログラムを使えば自動化・効率化できる作業が数多く存在します。しかし多くの医師はプログラミングに不慣れなため、こうした作業が手作業や担当者依存になりがちです。PALプロンプティングを活用することで、プログラミング知識がなくてもAIに適切なコードを生成させ、自分のデータに適用できます。

重要な注意点として、AIが生成するコードは必ずしも正確ではなく、医療統計においては前提の選択（検定の種類、多重比較の補正方法など）が結果に大きく影響します。生成されたコードは必ず内容を確認し、統計の専門知識がある者がレビューした上で使用することを推奨します。

## 基本的な使い方

```text
以下のデータ処理・分析タスクを実行するPythonコードを生成してください。

【タスク】
[何をしたいか具体的に記述]

【データ形式】
- ファイル形式: [CSV / Excel / JSON など]
- 主なカラム: [カラム名と内容]
- データ件数の目安: [例: 約500行]

【使用するライブラリ】
[例: pandas, scipy, matplotlib, seaborn]

【出力してほしいもの】
1. [例: 基本統計量（平均・中央値・標準偏差）]
2. [例: 群間比較の検定結果（p値）]
3. [例: 結果を可視化したグラフ]

コードには各ステップのコメントを付け、実行方法も説明してください。
```

特定の統計解析コードを依頼するテンプレート：

```text
臨床研究データの解析コードを生成してください。

【研究デザイン】
[例: 2群の前向きコホート研究（治療群 vs 対照群）]

【主要評価項目】
[例: 6ヶ月後のHbA1c変化量]

【共変量】
[例: 年齢、BMI、基準値HbA1c、罹病期間]

【必要な解析】
1. 基本属性の群間比較（連続変数はt検定、カテゴリ変数はカイ2乗検定）
2. 主要評価項目の群間比較
3. 交絡因子を調整した多変量回帰分析
4. Forest plotの作成

pandasとscipyとstatsmodelsを使用してください。各解析のp値と95%信頼区間を含めてください。
```

## 医療での活用例

### シナリオ

病院の臨床研究チームは、慢性疾患患者の治療効果を評価するために大量のバイタルサインデータや検査結果を統計解析する必要がある。手作業での集計が困難なため、効率的かつ正確にデータ処理を自動化したいと考えている。

### プロンプト例

```text
以下の患者データセット[患者情報]に基づき、治療前後のバイタルサインや検査値の変化を統計的に解析するPythonコードを生成してください。具体的には、平均値、標準偏差、t検定による有意差検証をステップバイステップで実行し、結果を分かりやすくまとめる形式でお願いします。データはCSV形式で与えられ、pandasとscipyを用いることを想定してください。

【データの構成】
- patient_id: 患者ID
- group: 治療群（treatment）または対照群（control）
- pre_sbp, post_sbp: 治療前後の収縮期血圧
- pre_hba1c, post_hba1c: 治療前後のHbA1c
- pre_ldl, post_ldl: 治療前後のLDL-C

【求める出力】
1. 各指標の治療前後変化量（Delta値）の計算
2. 群ごとのDelta値の記述統計
3. 群間のDelta値差のt検定（p値・95%CI付き）
4. 結果の表形式での出力
```

## いつ使うべきか

- 電子カルテデータや研究データの集計・統計処理を自動化したいとき
- 臨床研究の解析コードを最初から書くのが難しいが、方針は決まっているとき
- 定期的なデータ集計（例: 月次の感染症サーベイランスレポート）を自動化したいとき
- 複数の患者の検査値トレンドを一括で可視化したいとき
- 医療の質指標（QI）の自動計算・ダッシュボード化を検討しているとき
