---
title: "出力フォーマット制御"
description: "AIの出力形式を明確に指定して、構造化された一貫性のあるデータを得る手法"
category: "ai-fundamentals"
contentType: "tip"
difficulty: "intermediate"
tags: ["構造化出力", "フォーマット制御", "JSON", "中級テクニック"]
publishedAt: "2026-02-13"
featured: false
---

# 出力フォーマット制御

## このテクニックとは

出力フォーマット制御は、AIの回答形式を事前に指定することで、構造化された一貫性のある出力を得るテクニックです。JSON、マークダウンテーブル、番号付きリスト、特定のテンプレートなど、目的に応じた形式を指定することで、出力の再現性が高まり、後続の処理や記録への転用が容易になります。

医療分野では、電子カルテへの転記、他の医療スタッフとの情報共有、診療データの集計など、情報の構造化が求められる場面が多くあります。出力フォーマットを制御することで、これらの業務を効率化できます。

## 基本的な構造

フォーマット制御の方法は主に3つあります。

### 1. テンプレート指定

出力の雛形を提示し、それに従わせる方法です。

```text
以下のテンプレートに従って出力してください。

【患者ID】:
【年齢・性別】:
【主訴】:
【鑑別診断】:
  1.
  2.
  3.
【推奨検査】:
【緊急度】: 高 / 中 / 低
```

### 2. JSON形式の指定

プログラムで処理しやすい構造化データが必要な場合に有効です。

```text
以下の症例を分析し、JSON形式で出力してください。

{
  "主訴": "",
  "鑑別診断": [
    {
      "疾患名": "",
      "可能性": "高/中/低",
      "根拠": ""
    }
  ],
  "推奨検査": [],
  "緊急度": ""
}
```

### 3. マークダウンテーブル

比較や一覧が必要な場合に適した形式です。

```text
以下の薬剤を比較し、マークダウンテーブルで出力してください。

| 薬剤名 | 用量 | 投与経路 | 主な副作用 | 腎機能調整 |
|--------|------|---------|-----------|-----------|
```

## 具体例

### 検査結果の構造化

```text
以下の検査結果を整理し、異常値にはフラグを付けて
構造化してください。

出力形式：
## 血液検査結果

| 項目 | 結果 | 基準値 | 判定 |
|------|------|--------|------|

判定は以下を使用：
- ⬆ 高値
- ⬇ 低値
- ✓ 正常

## 総合評価
[異常値のパターンから考えられる病態を記載]

検査結果：
WBC 15200, Hb 10.2, Plt 45万, CRP 8.5, AST 120,
ALT 85, BUN 35, Cre 1.8, Na 138, K 5.2
```

## 医療での活用例

### シナリオ

救急外来で多数の患者を同時に管理する場面で、各患者の情報を統一されたフォーマットで整理し、チーム内で共有する必要があります。

### プロンプト例

```text
以下の患者情報を、救急外来トリアージ用の統一フォーマットで
整理してください。

出力形式：
━━━━━━━━━━━━━━━━━━━━━━
■ トリアージレベル: [赤/黄/緑]
■ 患者: [年齢][性別]
■ 主訴: [一行で記載]
■ バイタルサイン:
  体温___°C / 血圧___/___mmHg / 脈拍___/分 /
  呼吸数___/分 / SpO2___%
■ 第一印象: [一行で記載]
■ 緊急度の根拠: [一行で記載]
■ 初期対応: [箇条書き]
━━━━━━━━━━━━━━━━━━━━━━

患者情報：
80歳女性が呼吸困難で搬送。2時間前から突然の呼吸苦。
SpO2 88%（RA）。血圧160/95。脈拍120。両側下腿浮腫あり。
起座呼吸。既往に心不全、心房細動。
```

### 制約条件との組み合わせ

フォーマット指定と制約条件を組み合わせると、さらに精度の高い出力が得られます。

```text
以下の症例を分析し、指定のフォーマットで出力してください。

制約条件：
- 鑑別診断は5つ以内
- 各診断の説明は50文字以内
- 可能性の高い順に並べる
- 緊急度が高いものには「緊急」タグを付ける

出力形式：
## 鑑別診断リスト

1. [疾患名] [緊急タグ]
   説明: [50文字以内の説明]
   根拠: [主な根拠を1つ]
   次の検査: [最優先の検査を1つ]
```

## メリットとデメリット

### メリット

- **出力の一貫性**: 毎回同じ形式で出力が得られる
- **転記が容易**: 電子カルテやレポートへの転記がスムーズ
- **情報の漏れ防止**: テンプレートの項目を埋める形式のため、必要な情報が欠落しにくい
- **チーム内での共有**: 統一フォーマットにより情報共有が効率化される

### デメリット

- **柔軟性の低下**: 固定フォーマットに収まらない情報が省略される場合がある
- **フォーマット作成の手間**: 最初にテンプレートを設計する必要がある
- **形式の逸脱**: 複雑なフォーマットではAIが従わない場合がある

## 効果的なフォーマット設計のコツ

1. **シンプルに始める**: 最初は少ない項目で試し、徐々に追加する
2. **例を併用する**: フォーマットと一緒に記入例を示すと精度が上がる
3. **区切りを明確にする**: 項目間の区切り文字（|、/、---など）を明確にする
4. **必須項目を明示する**: 必ず埋めてほしい項目には「必須」と記載する

## いつ使うべきか

- 電子カルテへの転記用データを作成する場合
- チーム内で統一されたフォーマットで情報共有する場合
- データを集計・分析するための構造化が必要な場合
- 繰り返し使うテンプレートを作成したい場合
